{
  "openapi": "3.0.3",
  "info": {
    "title": "ChatApi",
    "description": "This is a sample Pet Store Server based on the OpenAPI 3.0 specification.  You can find out more about\nSwagger at [https://swagger.io](https://swagger.io). In the third iteration of the pet store, we've switched to the design first approach!\nYou can now help us improve the API whether it's by making changes to the definition itself or to the code.\nThat way, with time, we can improve the API in general, and expose some of the new features in OAS3.\n\n_If you're looking for the Swagger 2.0/OAS 2.0 version of Petstore, then click [here](https://editor.swagger.io/?url=https://petstore.swagger.io/v2/swagger.yaml). Alternatively, you can load via the `Edit > Load Petstore OAS 2.0` menu option!_\n\nSome useful links:\n- [The Pet Store repository](https://github.com/swagger-api/swagger-petstore)\n- [The source API definition for the Pet Store](https://github.com/swagger-api/swagger-petstore/blob/master/src/main/resources/openapi.yaml)",
    "contact": {
      "email": "apiteam@swagger.io"
    },
    "version": "0.0.13"
  },
  "servers": [
    {
      "url": "http://localhost/api"
    },
    {
      "url": "https://localhost/api"
    }
  ],
  "tags": [
    {
      "name": "Users",
      "description": "Usuários"
    },
    {
      "name": "Rooms",
      "description": "Salas"
    },
    {
      "name": "Messages",
      "description": "Mensagens"
    }
  ],
  "paths": {
    "/user": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Registrar um novo usuário",
        "description": "",
        "parameters": [
          {
            "name": "username",
            "in": "query",
            "description": "O nome do usuário para registro.",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "email",
            "in": "query",
            "description": "O e-mail do usuário para registro.",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "password",
            "in": "query",
            "description": "A senha do usuário para registro.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "success": {
            "description": "Operação realizada com sucesso.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "error": {
            "description": "Erro ao executar a operação.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/user/login": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Autenticar um usuário",
        "description": "Logar um usuário no sistema.",
        "parameters": [
          {
            "name": "username",
            "in": "query",
            "description": "O nome do usuário para login.",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "email",
            "in": "query",
            "description": "O e-mail do usuário para login.",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "password",
            "in": "query",
            "description": "A senha do usuário para login.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "success": {
            "description": "Operação realizada com sucesso.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Login"
                }
              }
            }
          },
          "error": {
            "description": "Erro ao executar a operação.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/user/{user_id}": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Obter informações de um usuário específico.",
        "description": "",
        "operationId": "getUserByName",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "O id do usuário para busca.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "success": {
            "description": "Operação realizada com sucesso.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "error": {
            "description": "Erro ao executar a operação.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },

    "/rooms": {
      "post": {
        "tags": [
          "Rooms"
        ],
        "summary": "Criar uma nova sala de chat",
        "description": "",
        "responses": {
          "success": {
            "description": "Operação realizada com sucesso.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Room"
                }
              }
            }
          },
          "error": {
            "description": "Error Operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/rooms/{room_id}": {
      "delete": {
        "tags": [
          "Rooms"
        ],
        "summary": "Delete room by id",
        "description": "",
        "parameters": [
          {
            "name": "room_id",
            "in": "path",
            "description": "The name that needs to be fetched. Use user1 for testing. ",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "success": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Room"
                }
              }
            }
          },
          "error": {
            "description": "Error Operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/rooms/{room_id}/enter": {
      "post": {
        "tags": [
          "Rooms"
        ],
        "summary": "Enter into a room by id",
        "description": "",
        "parameters": [
          {
            "name": "room_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "success": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EnterLeave"
                }
              }
            }
          },
          "error": {
            "description": "Error Operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/rooms/{room_id}/leave": {
      "delete": {
        "tags": [
          "Rooms"
        ],
        "summary": "Enter into a room by id",
        "description": "",
        "parameters": [
          {
            "name": "room_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "success": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EnterLeave"
                }
              }
            }
          },
          "error": {
            "description": "Error Operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/rooms/{room_id}/users/{user_id}": {
      "get": {
        "tags": [
          "Rooms"
        ],
        "summary": "Get user by user id",
        "description": "",
        "parameters": [
          {
            "name": "room_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "success": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "error": {
            "description": "Error Operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/rooms/{room_id}/messages": {
      "get": {
        "tags": [
          "Rooms"
        ],
        "summary": "Get messages by room",
        "description": "",
        "parameters": [
          {
            "name": "room_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "success": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Room"
                }
              }
            }
          },
          "error": {
            "description": "Error Operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Rooms"
        ],
        "summary": "Send messages by room",
        "description": "",
        "parameters": [
          {
            "name": "room_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "success": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Room"
                }
              }
            }
          },
          "error": {
            "description": "Error Operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },

    "/messages/direct/{receiver_id}": {
      "get": {
        "tags": [
          "Messages"
        ],
        "summary": "Logs message into the system",
        "description": "",
        "parameters": [
          {
            "name": "receiver_id",
            "in": "query",
            "description": "The user name for send message",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "success": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Message"
                }
              }
            }
          },
          "error": {
            "description": "Error Operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Messages"
        ],
        "summary": "Logs message into the system",
        "description": "",
        "parameters": [
          {
            "name": "receiver_id",
            "in": "query",
            "description": "The user name for send message",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "success": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Message"
                }
              }
            }
          },
          "error": {
            "description": "Error Operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Message": {
        "type": "object",
        "properties": {
          "user": {
            "type": "string"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "Room": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "example": 10
          },
          "name": {
            "type": "string",
            "format": "date-time"
          },
          "status": {
            "type": "boolean",
            "example": "true",
            "enum": [
              "placed",
              "approved",
              "delivered"
            ]
          },
          "limit": {
            "type": "integer",
            "format": "int64",
            "example": 10
          }
        },
        "xml": {
          "name": "order"
        }
      },
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "name": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "password": {
            "type": "string"
          },
          "access_token": {
            "type": "string"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      }
    },
    "securitySchemes": {
      "api_key": {
        "type": "apiKey",
        "name": "api_key",
        "in": "header"
      }
    }
  }
}
